---
title: "CS50 Tidemanã‚’ç†è§£ã™ã‚‹"
emoji: "ğŸ–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [C, cs50]
published: false
---

# ã¯ã˜ã‚ã«

ãƒãƒ¼ãƒãƒ¼ãƒ‰å¤§å­¦ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å…¥é–€è¬›åº§CS50(2020)ã®Week3èª²é¡Œ Tidemanã®èª¬æ˜ã‚’è¡Œã„ã¾ã™ã€‚
https://cs50.harvard.edu/x/2020/psets/3/tideman/

:::message
å–¶åˆ©ç›®çš„ã®ä½¿ç”¨ã€ä»–äººã®ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹è¡Œç‚ºã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™
ä¸€éƒ¨ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ãŒã‚«ãƒ³ãƒ‹ãƒ³ã‚°ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã›ã‚“ã€å­¦ç¿’ç›®çš„ã§ã”åˆ©ç”¨ãã ã•ã„
:::

cs50ã¯ç„¡å„Ÿå…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ãŒã€ä¿®äº†è¨¼æ˜ã¯æœ‰æ–™ã¨ãªã£ã¦ãŠã‚Šã€ä¸‹è¨˜ãƒšãƒ¼ã‚¸ã§æˆä¸ã•ã‚Œã¾ã™ã€‚
https://www.edx.org/course/introduction-computer-science-harvardx-cs50x



# Tideman
é †ä½é¸æŠåˆ¶é¸æŒ™ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å•é¡Œã§ã‚ã‚‹
å•é¡Œã®ç†è§£ãŒä¸ååˆ†ãªäººã¯ã¾ãšä¸‹è¨˜ã®å‹•ç”»ã‚’è¦‹ã¦ã‹ã‚‰å–ã‚Šçµ„ã‚€ã“ã¨ã‚’ãŠå‹§ã‚ã™ã‚‹

https://www.youtube.com/watch?v=kb83NwyYI68

# å…·ä½“ä¾‹

å…·ä½“ä¾‹ã¨ã—ã¦ã€9äººã®æŠ•ç¥¨è€…ãŒãã‚Œãã‚Œ3äººã®ç«‹å€™è£œè€…(Alice, Bob, Charlie)ã¸æŠ•ç¥¨ã™ã‚‹å ´åˆã‚’è€ƒãˆã‚‹
![](https://cs50.harvard.edu/x/2020/psets/3/no_condorcet_1.png)

**Alice** ã®æ–¹ã‚’ **Bob** ã‚ˆã‚Šé †ä½ã‚’é«˜ãè¨­å®šã—ãŸæŠ•ç¥¨è€…ã¯**7äºº**      Alice -> Bob
**Bob** ã®æ–¹ã‚’ **Charlie**ã‚ˆã‚Šé †ä½ã‚’é«˜ãè¨­å®šã—ãŸæŠ•ç¥¨è€…ã¯**5äºº**     Bob -> Charlie
**Charlie** ã®æ–¹ã‚’ **Alice**ã‚ˆã‚Šé †ä½ã‚’é«˜ãè¨­å®šã—ãŸæŠ•ç¥¨è€…ã¯**6äºº**   Charlie -> Alice

ã“ã®å ´åˆã€**å…¨ã¦ã®ç«‹å€™è£œè€…ã«çŸ¢å°ãŒå‘ã**(çŸ¢å°ãŒã‚µã‚¤ã‚¯ãƒ«ã¨ãªã£ã¦ã„ã‚‹)ãŸã‚**å‹è€…ãŒæ±ºã¾ã‚‰ãªã„**

ãã®ãŸã‚ã€å€™è£œè€…ã®ã‚°ãƒ©ãƒ•ã«**ã‚µã‚¤ã‚¯ãƒ«ã‚’ä½œæˆã—ãªã„**ã‚ˆã†ã«æ³¨æ„ã™ã‚‹**å¿…è¦ãŒã‚ã‚‹**

![](https://cs50.harvard.edu/x/2021/psets/3/lockin.png)
æ–¹æ³•ã¨ã—ã¦ã€ãã‚Œãã‚Œã®æŠ•ç¥¨å„ªå…ˆåº¦ã§ãƒšã‚¢ã‚’**ã²ã¨ã¤ãšã¤å›ºå®šã—ã¦ã„ã**æ–¹æ³•ãŒã‚ã‚‹
ã¾ãšã€ä¸€ç•ªå„ªå…ˆåº¦ãŒé«˜ã„**Alice -> Bob**ã¸çŸ¢å°ã‚’å¼•ã£å¼µã‚Šã€ãã®å¾Œã€**Charlie -> Alice** ã¸çŸ¢å°ã‚’å¼•ã
ã“ã®æ™‚ã€ã‚‚ã†ã²ã¨ã¤çŸ¢å°ã‚’å¼•ã„ã¦ã—ã¾ã†ã¨**ã‚µã‚¤ã‚¯ãƒ«ãŒç”Ÿã˜ã¦ã—ã¾ã†ãŸã‚ã“ã“ã§çµ‚äº†**ã—ã€
ã‚°ãƒ©ãƒ•ã‹ã‚‰**çŸ¢å°ã®åŸç‚¹**ã¨ãªã£ã¦ã„ã‚‹CharlieãŒ**å‹è€…**ã¨ãªã‚‹

## è€ƒãˆæ–¹
* Tally : æœ‰æ¨©è€…ãŒå€™è£œè€…ã®ãƒ©ãƒ³ã‚¯ä»˜ã‘ã‚’è¡Œã£ãŸã‚‰ã€å€™è£œè€…ã®ãƒšã‚¢ã”ã¨ã«å‹è€…ã‚’æ±ºå®šã™ã‚‹
* Sortï¼š å€™è£œè€…ã®ãƒšã‚¢ã‚’å‹ç‡ã®é«˜ã„é †ã«ä¸¦ã¹æ›¿ãˆã‚‹(é™é †ã§ã‚½ãƒ¼ãƒˆ)
* Lockï¼šæœ€ã‚‚å¼·ã„ãƒšã‚¢ã‹ã‚‰é †ã«å€™è£œã®ãƒšã‚¢ã‚’èª¿ã¹ã€ãã®ãƒšã‚¢ã‚’å›ºå®šã—ã¦ã‚‚ã‚°ãƒ©ãƒ•ã«ã‚µã‚¤ã‚¯ãƒ«ãŒç”Ÿã˜ãªã„å ´åˆã€å„ãƒšã‚¢ã‚’å€™è£œè€…ã‚°ãƒ©ãƒ•ã«å›ºå®šã—ã¦ã„ã
* ã‚°ãƒ©ãƒ•ã®é–‹å§‹ç‚¹ã¨ãªã‚‹äººãŒé¸æŒ™ã®å‹è€…ã§ã‚ã‚‹

## ãƒ†ã‚¹ãƒˆã‚µã‚¤ãƒˆ
https://tideman.netlify.app/

# äº‹å‰æº–å‚™
```
$ wget https://cdn.cs50.net/2020/fall/psets/3/tideman/tideman.c
```
ä¸Šè¨˜ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã«ã¯ã€ä»Šå›å®Ÿè£…ã‚’è¡Œãªã£ã¦ã„ãé–¢æ•°ãŒè¨˜è¿°ã•ã‚Œã¦ã„ã‚‹
ã¾ãŸã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§å€¤ã‚’å—ã‘å–ã‚‹éš›ã®ä¾‹å¤–å‡¦ç†ã‚‚ã™ã§ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹

```c
int preferences[MAX][MAX];  // preferences[i][j]: jã‚ˆã‚Šã‚‚iã‚’å¥½ã‚€æŠ•ç¥¨è€…ã®æ•°
bool locked[MAX][MAX];  // locked[i][j]: iãŒjã«å¯¾ã—ã¦ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹
typedef struct  // å‹è€…ã¨æ•—è€…ã®2ã¤ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŒã¤æ§‹é€ ä½“pairã‚’å®£è¨€
{
    int winner;
    int loser;
}
pair;
// ç«‹å€™è£œè€…ã®é…åˆ—
string candidates[MAX];
```

# æœ€çµ‚ç›®æ¨™(å®Ÿè¡Œä¾‹)
```diff: å®Ÿè¡Œä¾‹
./tideman Alice Bob Charlie
Number of voters: 5
Rank 1: Alice
Rank 2: Charlie
Rank 3: Bob

Rank 1: Alice
Rank 2: Charlie
Rank 3: Bob

Rank 1: Bob
Rank 2: Charlie
Rank 3: Alice

Rank 1: Bob
Rank 2: Charlie
Rank 3: Alice

Rank 1: Charlie
Rank 2: Alice
Rank 3: Bob

Charlie
```

# å®Ÿè£…
TODOã¨ãªã‚‹éƒ¨åˆ†ã«ã¤ã„ã¦å®Ÿè£…ã‚’è¡Œãªã£ã¦ã„ã
ç¾çŠ¶æŠŠæ¡ã¨ã—ã¦ã€ã¾ãšã¯ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†
```diff: å®Ÿè¡Œä¾‹
make tideman
./tideman Alice Bob Charlie
Number of voters: 5
Rank 1: Alice
Invalid vote.
```

## voteé–¢æ•°
**name(æŠ•ç¥¨ã•ã‚ŒãŸåå‰)ãŒå€™è£œè€…ã®åå‰ã¨ä¸€è‡´ã™ã‚‹æ™‚ã€é…åˆ—ranksã‚’æ›´æ–°ã™ã‚‹é–¢æ•°ã§ã‚ã‚‹**

81è¡Œç›®ã§å‘¼ã³å‡ºã•ã‚Œã¦ã„ã‚‹: ```vote(j, name, ranks)```
```bool(æˆ»ã‚Šå€¤ã®å‹): trueã¾ãŸã¯falseã‚’è¿”ã™```
```vote(é–¢æ•°å): æŠ•ç¥¨ã‚’è¡Œã†éƒ¨åˆ†ã®é–¢æ•°```
```int rank(å¼•æ•°1ã¤ç›®): jã®å€¤ãŒå…¥ã‚‹```
```string name(å¼•æ•°2ã¤ç›®): name(=get_string("Rank %i: ", j + 1))ã®å€¤ãŒå…¥ã‚‹```
```int ranks[](å¼•æ•°3ã¤ç›®): ranks(ranks[i]:æŠ•ç¥¨è€…ã®iç•ªç›®ã®é¸å¥½)ã®å€¤ãŒå…¥ã‚‹```

```c
bool vote(int rank, string name, int ranks[])
```

1. **name(æŠ•ç¥¨ã•ã‚ŒãŸåå‰)ãŒå€™è£œè€…ã®åå‰ã¨ä¸€è‡´ã™ã‚‹å ´åˆtrue, ãã†ã§ãªã‘ã‚Œã°falseã‚’è¿”ã™**
name(å…¥åŠ›ã•ã‚ŒãŸåå‰)ãŒã„ãšã‚Œã‹ã®ç«‹å€™è£œè€…ã®åå‰ã¨ä¸€è‡´ã™ã‚‹ã‹ã©ã†ã‹ã‚’è€ƒãˆã‚‹
ä¸€è‡´ã™ã‚‹ã‹ã©ã†ã‹ã®æ¡ä»¶å¼ã¯ä»¥ä¸‹ã§è€ƒãˆã‚‰ã‚Œã‚‹(strcmp: [Youtube](https://youtu.be/gR6nycuZKlM) 41:00ã‚ãŸã‚Šå‚ç…§)
```c
#include <string.h>
if (strcmp(name, candidates[i]) == 0)
```

2. **åå‰ãŒæ­£ã—ãå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã€é…åˆ—ranksã‚’æ›´æ–°ã™ã‚‹**
ranks[i]ã¯æŠ•ç¥¨è€…ã®iç•ªç›®ã®é¸å¥½(ç«‹å€™è£œè€…ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹)ã‚’è¡¨ã™
ranks[rank]: rankç•ªç›®ã®å¥½ã¿ã«ç«‹å€™è£œè€…ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å…¥ã‚Œã‚‹(æ›´æ–°)
Alice Bob Charlieã®å ´åˆã€ç«‹å€™è£œè€…ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯ãã‚Œãã‚Œ 0 1 2ã¨ãªã‚‹
```c
ranks[rank] = i;
```

3. **ranksã‚’æ­£å¸¸ã«æ›´æ–°ã§ããŸå ´åˆã€ã“ã®é–¢æ•°ã¯trueã‚’è¿”ã—ã€ãã†ã§ãªã„å ´åˆã¯falseã‚’è¿”ã™**
```c
return true;
return false;
```

ä¸Šæ‰‹ãã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ãã¦ã„ã‚Œã°ã€ä¸‹è¨˜ã®ã‚ˆã†ãªçµæœãŒå¾—ã‚‰ã‚Œã‚‹

```diff: å®Ÿè¡Œä¾‹
./tideman Alice Bob Charlie
Number of voters: 5
Rank 1: Alice
Rank 2: Bob
Rank 3: Charlie

Rank 1: Alice
Rank 2: A
Invalid vote.
```

## record_preferencesé–¢æ•°
**ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°preferencesã‚’æ›´æ–°ã—ã¦ç¾åœ¨ã®æŠ•ç¥¨è€…ã®é¸è€ƒã‚’è¿½åŠ ã™ã‚‹é–¢æ•°ã§ã‚ã‚‹**

88è¡Œç›®ã§å‘¼ã³å‡ºã•ã‚Œã¦ã„ã‚‹: ```record_preferences(ranks);```
```void(æˆ»ã‚Šå€¤ã®å‹): æˆ»ã‚Šå€¤ãªã—```
```record_preferences(é–¢æ•°å): ä¸€äººã®æŠ•ç¥¨è€…ã®é †ä½ãŒæ±ºã¾ã£ãŸã‚‰å„ªå…ˆé †ä½ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°```
```int ranks[](å¼•æ•°1ã¤ç›®): ranks(ranks[i]:æŠ•ç¥¨è€…ã®iç•ªç›®ã®é¸å¥½)ã®å€¤ãŒå…¥ã‚‹```

```c
void record_preferences(int ranks[])
```

1. **ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°preferencesã‚’æ›´æ–°ã—ã¦ç¾åœ¨ã®æŠ•ç¥¨è€…ã®é¸è€ƒã‚’è¿½åŠ ã™ã‚‹**
ä¸€äººç›®ã®æŠ•ç¥¨ãŒ 2, 1, 0(Bob, Alice, Charlie)ã ã£ãŸå ´åˆã€
```preferences[i][j]:å€™è£œè€…jã‚ˆã‚Šã‚‚å€™è£œè€…iã‚’å¥½ã‚€æŠ•ç¥¨è€…ã®æ•°```ã€€ã§ã‚ã‚‹ã“ã¨ã‹ã‚‰ã€
2 ã¯ 1 ã¨ 0 ã«å‹ã£ã¦ã„ã‚‹ãŸã‚ã€+1ã‚’ã™ã‚‹(preferences[2][1]++, preferences[2][0]++)
1 ã¯ 0ã€€ã«å‹ã£ã¦ã„ã‚‹ãŸã‚ã€+1ã™ã‚‹(preferences[1][0]++)
ã“ã‚Œã‚’è¡¨ã«ã™ã‚‹ã¨ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚‹
    |       | 0 | 1 | 2 |
    | ----- | - | - | - |
    | **0** | 0 | 0 | 0 |
    | **1** | 1 | 0 | 0 |
    | **2** | 1 | 1 | 0 |

    ã‚‚ã—5äººã®ç«‹å€™è£œè€…ã§ã€æŠ•ç¥¨ã•ã‚ŒãŸé †ä½ãŒ3, 0, 4, 1, 2ã§ã‚ã£ãŸå ´åˆã€

    |       i       |       j       |       j       |       j       |       j       |
    | ------------- | ------------- | ------------- | ------------- | ------------- |
    | **3(= ranks[0])** | 0(= ranks[1]) | 4(= ranks[2]) | 1(= ranks[3]) | 2(= ranks[4]) |
    | **0(= ranks[1])** |               | 4(= ranks[2]) | 1(= ranks[3]) | 2(= ranks[4]) |
    | **4(= ranks[2])** |               |               | 1(= ranks[3]) | 2(= ranks[4]) |
    | **1(= ranks[3])** |               |               |               | 2(= ranks[4]) |

ã¤ã¾ã‚Šã€iã«jã‚ˆã‚Šã‚‚é«˜ã„ãƒ©ãƒ³ã‚¯å€¤ãŒå…¥ã£ã¦ã„ã‚‹æ™‚ã€preferencesã‚’æ›´æ–°ã™ã‚Œã°è‰¯ã„

```c
for (int i = 0; i < candidate_count; i++)
    {
        for (int j = i + 1; j < candidate_count; j++)
        {
            preferences[ranks[i]][ranks[j]]++;
        }
    }
```

## add_pairsé–¢æ•°
**å‹åˆ©ã®å¼·ã•ã®é †åºã§ãƒšã‚¢ã‚’è¿½åŠ ã—ã¦ã„ãé–¢æ•°ã§ã‚ã‚‹**
93è¡Œç›®ã§å‘¼ã³å‡ºã•ã‚Œã¦ã„ã‚‹: ```add_pairs();```
1. **å‹è€…ã¨æ•—è€…ãŒèª°ã§ã‚ã‚‹ã‹ã‚’ç¤ºã™é…åˆ—pairã‚’è¿½åŠ ã—ã¦ã„ã**
å¼·ã•ã¯record_preferencesã§æ›´æ–°ã—ãŸpreferencesãŒç¤ºã—ã¦ã„ã‚‹
3äººã®ç«‹å€™è£œè€…(Alice, Bob, Charlie), 4äººã®æŠ•ç¥¨è€…ãŒã„ãŸå ´åˆã§è€ƒãˆã¦ã¿ã‚‹

    |     VOTE    |   VOTE  |   VOTE  |   VOTE  |   VOTE  |
    | ----------- | ------- | ------- | ------- | ------- |
    | **Rank 1:** |  Alice  |  Alice  | Charlie |   Bob   |
    | **Rank 2:** | Charlie | Charlie |  Alice  |  Alice  |
    | **Rank 3:** |   Bob   |   Bob   |   Bob   | Charlie |

    å…¨ã¦ã®preferences[i][j]ã‚’æ›´æ–°ã™ã‚‹ã¨ã€ä¸‹è¨˜ã®ã‚ˆã†ãªè¡¨ã¨ãªã‚‹

    |                  |  Alice(= 0)  |   Bob(= 1)   | Charlie(= 2) |
    | :--------------: | :----------: | :----------: | :----------: |
    |  **Alice(= 0)**  |      0       |      3       |      3       |
    |   **Bob(= 1)**   |      1       |      0       |      1       |
    | **Charlie(= 2)** |      1       |      3       |      0       |

    ã“ã®æ™‚ã€Alice(= 0)ã¯Bob(= 1)ã‚ˆã‚Šã‚‚äººæ°—ã§ã‚ã‚Šã€ã¾ãŸã€Charlie(= 2)ã‚ˆã‚Šã‚‚äººæ°—ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹
    ã¤ã¾ã‚Šã€preferences[i][j] > preferences[j][i]ã§ã‚ã‚‹ã¨ãã€pairã‚’è¿½åŠ ã—ã¦ã„ã‘ã°è‰¯ã„

    ```c
    if (preferences[i][j] > preferences[j][i])
        {
            pairs[pair_count].winner = i;
            pairs[pair_count].loser = j;
            pair_count++;
        }
    ```


## sort_pairsé–¢æ•°
**å‹ç‡ã®é«˜ã„é †(é™é †)ã«pairsã‚’ä¸¦ã¹ã‚‹é–¢æ•°ã§ã‚ã‚‹**
93è¡Œç›®ã§å‘¼ã³å‡ºã•ã‚Œã¦ã„ã‚‹: ```sort_pairs();```

1. **é¸æŠã‚½ãƒ¼ãƒˆã‚’ç”¨ã„ã¦å‹ç‡ã®é«˜ã„é †(é™é †)ã«pairsã‚’ä¸¦ã¹ã‚‹**
```é¸æŠã‚½ãƒ¼ãƒˆ: é…åˆ—ã®å·¦ã‹ã‚‰å³ã«å‘ã‹ã£ã¦ä¸ãˆã‚‰ã‚ŒãŸãƒ‡ãƒ¼ã‚¿å…¨ã¦ã®è¦ç´ ã¨æ¯”è¼ƒã‚’è¡Œã„ä¸¦ã³æ›¿ãˆã‚‹æ‰‹æ³•```

https://www.cs.usfca.edu/~galles/visualization/ComparisonSort.html

add_pairsé–¢æ•°ã§ä½¿ç”¨ã—ãŸå…·ä½“ä¾‹ã‚’ã‚‚ã¨ã«è€ƒãˆã¦ã„ã

|                  |  Alice(= 0)  |   Bob(= 1)   | Charlie(= 2) |
| :--------------: | :----------: | :----------: | :----------: |
|  **Alice(= 0)**  |      0       |      3       |      3       |
|   **Bob(= 1)**   |      1       |      0       |      1       |
| **Charlie(= 2)** |      1       |      3       |      0       |

|   pair_count    |    0   |    1   |    2   |
|   :--------:    | :----: | :----: | :----: |
|   **pairs**     | (0, 1) | (0, 2) | (2, 1) |
| **preferences** | 3 | 3 | 3 |
|   **sort_pairs**     | (0, 1) | (0, 2) | (2, 1) |


ä¸Šè¨˜ã®pairsã‚’é™é †ã«ä¸¦ã¹ã¦ã„ã‘ã°è‰¯ã„
ä»Šå›ã¯ã€preferences[0][1] = preferences[0][2] = preferences[2][1]ã§ã‚ã‚‹ã“ã¨ã‹ã‚‰ã€
ã‚½ãƒ¼ãƒˆå¾Œã®pairsã®ä¸¦ã³é †ã‚‚(0,1), (0,2), (2,1)ã¨ãªã‚‹ã“ã¨ãŒã‚ã‹ã‚‹

```c
for (int i = 0; i < pair_count; i++)
{
    if (preferences[pairs[i].winner][pairs[i].loser] < preferences[pairs[i + 1].winner][pairs[i + 1].loser])
    {
        pair tmp = pairs[i];
        pairs[i] = pairs[i + 1];
        pairs[i + 1] = tmp;
    }
}
```

## lock_pairsé–¢æ•°
**ã‚µã‚¤ã‚¯ãƒ«ã‚’ä½œã‚‰ãªã„ã‚ˆã†ã«ãƒšã‚¢ã‚’å€™è£œã‚°ãƒ©ãƒ•ã«é †ç•ªã«å›ºå®šã—ã¦ã„ãé–¢æ•°ã§ã‚ã‚‹**
95è¡Œç›®ã§å‘¼ã³å‡ºã•ã‚Œã¦ã„ã‚‹: ```lock_pairs();```

ã“ã“ã§ã„ã†ã€ã‚µã‚¤ã‚¯ãƒ«ã‚’ä½œã‚‰ãªã„ã¨ã¯ã€**çŸ¢å°ãŒä¸€å‘¨ã—ãªã„**ã“ã¨ã‚’æŒ‡ã™

|   pair_count    |    0   |    1   |    2   |    3   |    4   |    5   |
|   :--------:    | :----: | :----: | :----: | :----: | :----: | :----: |
|   **sort_pairs**     | (d, a) | (a, b) | (b, c) | (c, a) | (d, b) | (d, c) |

ä¸Šè¨˜ã®å ´åˆã‚’ã‚‚ã¨ã«è€ƒãˆã¦ã„ã

1. **ã‚µã‚¤ã‚¯ãƒ«ãŒå½¢æˆã•ã‚Œã¦ã„ãªã„æ™‚ã€ãƒšã‚¢ã‚’ãƒ­ãƒƒã‚¯ã™ã‚‹**
    ãƒ­ãƒƒã‚¯ã¯ã€```bool locked[i][j]: i -> jã§ãƒ­ãƒƒã‚¯ã™ã‚‹(true)```ã§ç¤ºã™ã“ã¨ãŒã§ãã‚‹
    ```check_cycle(pairs[i].winner, pairs[i].loser): ã‚µã‚¤ã‚¯ãƒ«ãŒå½¢æˆã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã™ã‚‹é–¢æ•°```ã«é–¢ã—ã¦ã¯**2**.ã§èª¬æ˜ã‚’è¡Œã†

    ```c
    for (int i = 0; i < pair_count; i++)
    {
        // ã‚µã‚¤ã‚¯ãƒ«ãŒå½¢æˆã•ã‚Œã¦ã„ãªã„æ™‚
        if(!check_cycle(pairs[i].winner, pairs[i].loser))
        {
            // ãƒšã‚¢ã‚’ãƒ­ãƒƒã‚¯ã™ã‚‹
            locked[pairs[i].winner][pairs[i].loser] = true;
        }
    }
    return;
    ```

2. **ãƒ­ãƒƒã‚¯ã—ãŸãƒšã‚¢ãŒã‚µã‚¤ã‚¯ãƒ«ã‚’ç”Ÿæˆã—ã¦ã„ãªã„ã‹ã‚’åˆ¤æ–­ã™ã‚‹**
    ```check_cycle(): ã‚µã‚¤ã‚¯ãƒ«ãŒå½¢æˆã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã™ã‚‹é–¢æ•°```ã‚’ä½œæˆã™ã‚‹

    |   pair_count    |    0   |    1   |    2   |    3   |    4   |    5   |
    |   :--------:    | :----: | :----: | :----: | :----: | :----: | :----: |
    |   **sort_pairs**     | (d, a) | (a, b) | (b, c) | (c, a) | (d, b) | (d, c) |

    ãƒšã‚¢ãŒã‚µã‚¤ã‚¯ãƒ«ã‚’å½¢æˆã™ã‚‹ã‹ã©ã†ã‹ã®åˆ¤æ–­åŸºæº–ã®1ã¤ã¨ã—ã¦ã€**loserãŒwinnerã¨ãªã£ã¦ã„ã‚‹ãƒšã‚¢ãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹**ãŒæŒ™ã’ã‚‰ã‚Œã‚‹
    å®Ÿéš›ã«å…·ä½“ä¾‹([ã“ã¡ã‚‰ã§å–ã‚Šä¸Šã’ã‚‰ã‚Œã¦ã„ã‚‹å†…å®¹](https://gist.github.com/nicknapoli82/6c5a1706489e70342e9a0a635ae738c9))ã‚’ã‚‚ã¨ã«è€ƒãˆã¦ã„ã

    1. **pair(d, a)**
    aãŒã™ã§ã«ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸãƒšã‚¢ã§winnerã¨ãªã£ã¦ã„ãªã„ã“ã¨ã‹ã‚‰ã€ã‚µã‚¤ã‚¯ãƒ«ãŒå½¢æˆã•ã‚Œã‚‹ã“ã¨ã¯ãªã„
    **pair(d, a)ã‚’ãƒ­ãƒƒã‚¯ã™ã‚‹**```locked[d][a] = true; ```
        ```mermaid
        graph LR
        d --> a
        ```

    2. **pair(a, b)**
    bãŒã™ã§ã«ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸãƒšã‚¢ã§winnerã¨ãªã£ã¦ã„ãªã„ã“ã¨ã‹ã‚‰ã€ã‚µã‚¤ã‚¯ãƒ«ãŒå½¢æˆã•ã‚Œã‚‹ã“ã¨ã¯ãªã„
    **pair(a, b)ã‚’ãƒ­ãƒƒã‚¯ã™ã‚‹**```locked[a][b] = true; ```
        ```mermaid
        graph LR
        a --> b
        ```

    3. **pair(b, c)**
    cãŒã™ã§ã«ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸãƒšã‚¢ã§winnerã¨ãªã£ã¦ã„ãªã„ã“ã¨ã‹ã‚‰ã€ã‚µã‚¤ã‚¯ãƒ«ãŒå½¢æˆã•ã‚Œã‚‹ã“ã¨ã¯ãªã„
    **pair(b, c)ã‚’ãƒ­ãƒƒã‚¯ã™ã‚‹**```locked[b][c] = true; ```
        ```mermaid
        graph LR
        b --> c
        ```

    4. **pair(c, a)**
    aãŒã™ã§ã«ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸãƒšã‚¢ã§winnerã¨ãªã£ã¦ã„ã‚‹(2. **pair(a, b)**)ã“ã¨ã‹ã‚‰ã€ã‚µã‚¤ã‚¯ãƒ«ãŒå½¢æˆã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹

        ```mermaid
        graph LR
        c --> a -.-> b -.-> c
        ```
        ã‚µã‚¤ã‚¯ãƒ«ãŒå½¢æˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ããŸãŸã‚ã€**pair(c, a)ã¯ãƒ­ãƒƒã‚¯ã‚’ã—ãªã„**

    5. **pair(d, b)**
    bãŒã™ã§ã«ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸãƒšã‚¢ã§winnerã¨ãªã£ã¦ã„ã‚‹(3. **pair(b, c)**)ã“ã¨ã‹ã‚‰ã€ã‚µã‚¤ã‚¯ãƒ«ãŒå½¢æˆã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹

        ```mermaid
        graph LR
        d --> b -.-> c 
        ```
        ã‚µã‚¤ã‚¯ãƒ«ã‚’å½¢æˆã—ãªã„ã“ã¨ãŒç¢ºèªã§ããŸãŸã‚ã€**pair(d, b)ã‚’ãƒ­ãƒƒã‚¯ã™ã‚‹**```locked[d][b] = true; ```

    6. **pair(d, c)**
    cãŒã™ã§ã«ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸãƒšã‚¢ã§winnerã¨ãªã£ã¦ã„ãªã„ã“ã¨ã‹ã‚‰ã€ã‚µã‚¤ã‚¯ãƒ«ãŒå½¢æˆã•ã‚Œã‚‹ã“ã¨ã¯ãªã„
    **pair(d, c)ã‚’ãƒ­ãƒƒã‚¯ã™ã‚‹**```locked[d][c] = true; ```
        ```mermaid
        graph LR
        d --> c
        ```

    ##### (1. ~ 6.)ã¾ã¨ã‚
    ä»¥ä¸Šã‚ˆã‚Šã€ä»¥ä¸‹ã®è¡¨ã®ã‚ˆã†ã«ãªã‚‹ã“ã¨ãŒã‚ã‹ã‚‹
    |   pair_count    |    0   |    1   |    2   |    3   |    4   |    5   |
    |   :--------:    | :----: | :----: | :----: | :----: | :----: | :----: |
    |   **sort_pairs**     | (d, a) | (a, b) | (b, c) | (c, a) | (d, b) | (d, c) |
    |   **locked**     | TRUE | TRUE | TRUE | FALSE | TRUE | TRUE |

    ```mermaid
    graph LR
    d --> a & b & c 
    a --> b --> c
    ```

    ã‚ˆã£ã¦ã€ã‚µã‚¤ã‚¯ãƒ«(çŸ¢å°ãŒä¸€å‘¨ã™ã‚‹)å½¢æˆã•ã‚Œã‚‹ã“ã¨ã¯ãªãã€**å§‹ç‚¹ã¨ãªã‚‹dãŒå‹åˆ©ã¨ãªã‚‹**ã“ã¨ãŒã‚ã‹ã‚‹
    
    ```
        
    ```


